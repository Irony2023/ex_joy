from inputs import get_gamepad

# Define the name of the Logitech F710 gamepad (adjust if necessary)
gamepad_name = "Logitech Gamepad F710"

# Find the gamepad device
gamepad_device = None

while gamepad_device is None:
    events = get_gamepad()
    for event in events:
        if event.ev_type == "DeviceAdded":
            if event.ev_device == gamepad_name:
                gamepad_device = event.ev_device
                break

if gamepad_device is None:
    print(f"Device '{gamepad_name}' not found. Make sure it's connected.")
else:
    print(f"Found '{gamepad_name}'")

    # Track the state of the X button
    x_button_pressed = False

    try:
        while True:
            events = get_gamepad()
            for event in events:
                if event.ev_type == "Key" and event.ev_device == gamepad_name:
                    if event.ev_code == "BTN_SOUTH":  # Adjust to match the X button code on your gamepad
                        if event.ev_value == 1 and not x_button_pressed:
                            x_button_pressed = True
                            print("X button pressed")
                        elif event.ev_value == 0 and x_button_pressed:
                            x_button_pressed = False
                            print("X button released")

    except KeyboardInterrupt:
        print("Exiting...")
