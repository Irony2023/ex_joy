import evdev
from evdev import InputDevice

# Define the name of the Logitech F710 gamepad (adjust if necessary)
gamepad_name = "Logitech Gamepad F710"

# Find the gamepad device
gamepad_device = None

devices = [InputDevice(fn) for fn in evdev.list_devices()]
for device in devices:
    if device.name == gamepad_name:
        gamepad_device = device
        break

if gamepad_device is None:
    print(f"Device '{gamepad_name}' not found. Make sure it's connected.")
else:
    print(f"Found '{gamepad_name}'")

    # Define the event codes for the X button
    X_BUTTON_EVENT = evdev.ecodes.BTN_A

    # Track the button state
    x_button_pressed = False

    try:
        for event in gamepad_device.read_loop():
            if event.type == evdev.ecodes.EV_KEY and event.code == X_BUTTON_EVENT:
                if event.value == 1 and not x_button_pressed:
                    x_button_pressed = True
                    print("X button pressed")
                elif event.value == 0 and x_button_pressed:
                    x_button_pressed = False
                    print("X button released")

    except KeyboardInterrupt:
        print("Exiting...")
